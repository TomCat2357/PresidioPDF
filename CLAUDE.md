# PresidioPDF Project Configuration

## Overview
This project is a **Japanese personal information detection and masking tool for PDF documents** using Microsoft Presidio. Dependencies are managed using **uv**.

## Package Management
- **Package Manager**: `uv` is used for dependency management
- **Add new dependencies**: `uv add <package-name>`
- **Add development dependencies**: `uv add --dev <package-name>`
- **Sync dependencies**: `uv sync`
- **Run commands**: `uv run <command>` or activate virtual environment

## Project Structure
```
PresidioPDF/
├── CLAUDE.md              # This file (Claude project configuration)
├── pyproject.toml         # Project configuration and uv dependencies
├── uv.lock               # Lock file (auto-generated by uv)
├── .venv/                # Virtual environment (auto-created by uv)
├── .mcp.json             # MCP server configuration
├── config.yaml           # Application configuration
├── config_ja_core_news_md.yaml  # Japanese NLP model config
├── src/                  # Source code
│   ├── core/             # Core functionality
│   ├── nlp/              # NLP processing modules
│   ├── pdf/              # PDF processing modules
│   ├── web/              # Web application modules
│   ├── templates/        # HTML templates
│   ├── static/           # Static web assets
│   └── outputs/          # Output processing
├── tests/                # Test files
├── test_pdfs/            # Test PDF files
├── data/                 # Data files
├── outputs/              # Generated output files
├── web_uploads/          # Web app upload directory
├── archives/             # Archive files
└── build/                # Build artifacts
```

## Optional Dependencies
The project supports multiple installation modes:
- **Default (CPU)**: Basic functionality with CPU-only models
- **GPU**: Enhanced performance with GPU-optimized models
- **Minimal**: Lightweight installation for basic PDF processing
- **Web**: Web application dependencies
- **GUI**: Desktop GUI dependencies
- **Dev**: Development and testing tools

## Development Workflow
1. **Setup**: `uv sync` to install project dependencies
2. **Development**: Edit code, then run with `uv run <script>`
3. **Testing**: `uv run pytest` for running tests
4. **Linting**: `uv run black .` for code formatting
5. **Type checking**: `uv run mypy src/` for type verification

## Instructions for Claude
- Always use `uv` commands for package management
- Do NOT use `pip` - this project exclusively uses uv
- When adding new dependencies, check `pyproject.toml` for appropriate optional dependency groups
- The virtual environment is automatically created in `.venv/` directory
- Work from the project root directory
- This is a Japanese NLP project focusing on PII detection in PDFs
- The project uses spaCy with Japanese models for text processing
- Web interface is available via Flask application

## Important Files
- `pyproject.toml`: Project configuration and dependency definitions
- `uv.lock`: Dependency lock file (version pinning)
- `config.yaml`: Application configuration file
- `src/pdf_presidio_processor.py.old`: Legacy main processor
- `src/web_main.py`: Web application entry point

## Common Commands
```bash
# Project initialization
uv sync

# Install optional dependencies
uv sync --extra dev        # Development tools
uv sync --extra gpu        # GPU-optimized models
uv sync --extra web        # Web application
uv sync --extra gui        # Desktop GUI

# Run the main application
uv run python -m src.cli

# Run web application
uv run python src/web_main.py

# Run tests
uv run pytest

# Code formatting
uv run black .

# Type checking
uv run mypy src/

# Check dependency tree
uv tree

# Enter virtual environment shell
uv shell
```